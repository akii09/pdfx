import{j as o}from"./index-DXO6xX0s.js";import{u as ut,b as nt,V as G,T as W,d as it,e as yt,f as gt,g as st,G as H,h as Z,C as xt,i as E,R as K,S as mt}from"./pdf-preview-Bv8U5Sqd.js";const pt=595;function $t(t,a={}){const{containerPadding:r=0,wrapperPadding:l=0,pageWidth:h=pt}=a,{marginLeft:n,marginRight:s}=t.spacing.page,i=h-n-s-r*2-l*2;return Math.max(Math.floor(i),100)}const jt={default:420},P={axisLeft:40,pieLeft:10,right:10,top:10,axisBottom:24,pieBottom:10};function bt(t){return mt.create({container:{display:"flex",flexDirection:"column",marginBottom:t.spacing.componentGap},title:{fontFamily:t.typography.heading.fontFamily,fontSize:t.primitives.typography.base,fontWeight:t.primitives.fontWeights.semibold,color:t.colors.foreground,marginBottom:2},subtitle:{fontFamily:t.typography.body.fontFamily,fontSize:t.primitives.typography.xs,color:t.colors.mutedForeground,marginBottom:6},legendRow:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:12,marginTop:6},legendColumn:{display:"flex",flexDirection:"column",gap:8,marginLeft:12,marginTop:18,minWidth:120},legendItem:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},legendText:{fontFamily:t.typography.body.fontFamily,fontSize:t.primitives.typography.xs,color:t.colors.mutedForeground},chartWithRightLegend:{display:"flex",flexDirection:"row",alignItems:"flex-start"}})}function Mt(t){return t.length===0?[]:"label"in t[0]&&"value"in t[0]?[{name:"Series 1",data:t}]:t}function St(t,a,r){if(t===a)return[0,a||1];const l=(a-t)/(r-1);return Array.from({length:r},(h,n)=>{const s=t+n*l;return Math.round(s*100)/100})}function Y(t){return Math.abs(t)>=1e6?`${(t/1e6).toFixed(1)}M`:Math.abs(t)>=1e3?`${(t/1e3).toFixed(1)}K`:Number.isInteger(t)?String(t):t.toFixed(1)}function X(t,a){return t.length>a?`${t.slice(0,a-1)}â€¦`:t}function I(t,a,r,l){const h=(l-90)*Math.PI/180;return{x:t+r*Math.cos(h),y:a+r*Math.sin(h)}}function Ft(t,a,r,l,h,n=0){const s=Math.min(h,l+359.999),i=s-l>180?1:0,x=I(t,a,r,s),c=I(t,a,r,l);if(n===0)return`M ${t} ${a} L ${x.x} ${x.y} A ${r} ${r} 0 ${i} 0 ${c.x} ${c.y} Z`;const f=I(t,a,n,s),b=I(t,a,n,l);return[`M ${x.x} ${x.y}`,`A ${r} ${r} 0 ${i} 0 ${c.x} ${c.y}`,`L ${b.x} ${b.y}`,`A ${n} ${n} 0 ${i} 1 ${f.x} ${f.y}`,"Z"].join(" ")}function kt(t,a=.4){if(t.length<2)return"";if(t.length===2)return`M ${t[0].x} ${t[0].y} L ${t[1].x} ${t[1].y}`;const r=[`M ${t[0].x} ${t[0].y}`];for(let l=0;l<t.length-1;l++){const h=t[Math.max(l-1,0)],n=t[l],s=t[l+1],i=t[Math.min(l+2,t.length-1)],x=n.x+(s.x-h.x)*a,c=n.y+(s.y-h.y)*a,f=s.x-(i.x-n.x)*a,b=s.y-(i.y-n.y)*a;r.push(`C ${x} ${c} ${f} ${b} ${s.x} ${s.y}`)}return r.join(" ")}function Ct(t){return[t.colors.primary,t.colors.info??"#3B82F6",t.colors.success??"#22C55E",t.colors.warning??"#F59E0B",t.colors.destructive??"#EF4444","#8B5CF6","#F97316","#14B8A6"]}function Wt(t,a,r,l,h,n){const{chartX:s,chartY:i,chartW:x,chartH:c,yMin:f,yMax:b,yTicks:m,xLabels:p}=a,L=p.length,v=t.length,A=.25,y=x/L,$=y*(1-A)/v,S=n.colors.mutedForeground,C=n.colors.border,d=n.colors.foreground,F=b-f||1;return o.jsxs(o.Fragment,{children:[m.map(u=>{const e=i+c-(u-f)/F*c;return o.jsxs(H,{children:[l&&o.jsx(E,{x1:s,y1:e,x2:s+x,y2:e,stroke:C,strokeWidth:.5,strokeDasharray:"3 3"}),o.jsx(W,{x:s-4,y:e+3,fill:S,textAnchor:"end",style:{fontSize:7},children:Y(u)})]},`grid-${u}`)}),o.jsx(E,{x1:s,y1:i+c,x2:s+x,y2:i+c,stroke:d,strokeWidth:1}),p.map((u,e)=>{const g=s+e*y+y*(A/2);return o.jsxs(H,{children:[t.map((M,j)=>{var R,O;const z=((R=M.data[e])==null?void 0:R.value)??0,T=((O=M.data[e])==null?void 0:O.color)??M.color??r[j%r.length],k=(z-f)/F*c,w=g+j*$,_=i+c-k;return o.jsxs(H,{children:[o.jsx(K,{x:w,y:_,width:$-1,height:k,fill:T}),h&&k>10&&o.jsx(W,{x:w+$/2-.5,y:_-2,fill:d,textAnchor:"middle",style:{fontSize:6},children:Y(z)})]},`bar-${e}-${j}`)}),o.jsx(W,{x:g+v*$/2,y:i+c+10,fill:S,textAnchor:"middle",style:{fontSize:7},children:X(u,10)})]},`group-${e}`)})]})}function At(t,a,r,l,h){const{chartX:n,chartY:s,chartW:i,chartH:x,xLabels:c}=a,f=c.length,b=t.flatMap($=>$.data.map(S=>S.value)),m=Math.max(...b,1),p=x/f,L=p*.5,v=h.colors.mutedForeground,A=h.colors.foreground,y=60;return o.jsxs(o.Fragment,{children:[c.map(($,S)=>{var e,g,M,j,z;const C=s+S*p,d=((g=(e=t[0])==null?void 0:e.data[S])==null?void 0:g.value)??0,F=((j=(M=t[0])==null?void 0:M.data[S])==null?void 0:j.color)??((z=t[0])==null?void 0:z.color)??r[S%r.length],u=d/m*(i-y);return o.jsxs(H,{children:[o.jsx(W,{x:n+y-4,y:C+p/2+3,fill:v,textAnchor:"end",style:{fontSize:7},children:X($,14)}),o.jsx(K,{x:n+y,y:C+(p-L)/2,width:Math.max(u,1),height:L,fill:F}),l&&o.jsx(W,{x:n+y+u+3,y:C+p/2+3,fill:A,textAnchor:"start",style:{fontSize:6},children:Y(d)})]},`hbar-${S}`)}),o.jsx(E,{x1:n+y,y1:s,x2:n+y,y2:s+x,stroke:A,strokeWidth:1})]})}function at(t,a,r,l,h,n,s,i,x){const{chartX:c,chartY:f,chartW:b,chartH:m,yMin:p,yMax:L,yTicks:v,xLabels:A}=a,y=L-p||1,$=x.colors.mutedForeground,S=x.colors.border,C=x.colors.foreground,d=A.length,F=e=>c+e/Math.max(d-1,1)*b,u=e=>f+m-(e-p)/y*m;return o.jsxs(o.Fragment,{children:[v.map(e=>{const g=u(e);return o.jsxs(H,{children:[l&&o.jsx(E,{x1:c,y1:g,x2:c+b,y2:g,stroke:S,strokeWidth:.5,strokeDasharray:"3 3"}),o.jsx(W,{x:c-4,y:g+3,fill:$,textAnchor:"end",style:{fontSize:7},children:Y(e)})]},`grid-${e}`)}),o.jsx(E,{x1:c,y1:f+m,x2:c+b,y2:f+m,stroke:C,strokeWidth:1}),t.map((e,g)=>{const M=e.color??r[g%r.length],j=e.data.map((k,w)=>({x:F(w),y:u(k.value)})),z=s?kt(j):`M ${j.map(k=>`${k.x} ${k.y}`).join(" L ")}`,T=i&&j.length>1?`${z} L ${j[j.length-1].x} ${f+m} L ${j[0].x} ${f+m} Z`:null;return o.jsxs(H,{children:[i&&T&&o.jsx(Z,{d:T,fill:M,fillOpacity:.2,stroke:"none"}),o.jsx(Z,{d:z,stroke:M,strokeWidth:2,fill:"none"}),n&&j.map((k,w)=>o.jsx(xt,{cx:k.x,cy:k.y,r:3,fill:M},`dot-${w}`)),h&&j.map((k,w)=>o.jsx(W,{x:k.x,y:k.y-5,fill:M,textAnchor:"middle",style:{fontSize:6},children:Y(e.data[w].value)},`val-${w}`))]},`series-${g}`)}),A.map((e,g)=>o.jsx(W,{x:F(g),y:f+m+10,fill:$,textAnchor:"middle",style:{fontSize:7},children:X(e,8)},`xlabel-${e}`))]})}function ct(t,a,r,l,h,n){var A;const{svgW:s,svgH:i}=a,x=s/2,c=i/2,f=Math.min(s,i)/2-20,b=h?f*.52:0,m=n.colors.mutedForeground,p=((A=t[0])==null?void 0:A.data)??[],L=p.reduce((y,$)=>y+$.value,0)||1;let v=0;return o.jsxs(o.Fragment,{children:[p.map((y,$)=>{const S=y.color??r[$%r.length],C=y.value/L*360,d=v+C/2,F=Ft(x,c,f,v,v+C,b);v+=C;const u=f*1.18,e=I(x,c,u,d),g=e.x>x?"start":"end";return o.jsxs(H,{children:[o.jsx(Z,{d:F,fill:S,stroke:"white",strokeWidth:1}),C>15&&o.jsx(W,{x:e.x,y:e.y+3,fill:m,textAnchor:g,style:{fontSize:7},children:X(y.label,10)})]},`slice-${$}`)}),h&&l&&o.jsxs(o.Fragment,{children:[o.jsx(xt,{cx:x,cy:c,r:b,fill:"white"}),o.jsx(W,{x,y:c+4,fill:n.colors.foreground,textAnchor:"middle",style:{fontSize:9,fontWeight:"bold"},children:l})]})]})}function lt({series:t,palette:a,styles:r,position:l="bottom"}){const h=l==="right"?r.legendColumn:r.legendRow;return o.jsx(G,{style:h,children:t.map((n,s)=>o.jsxs(G,{style:r.legendItem,children:[o.jsx(it,{width:10,height:10,children:o.jsx(K,{x:0,y:2,width:8,height:8,fill:n.color??a[s%a.length]})}),o.jsx(W,{style:r.legendText,children:n.name})]},n.name))})}function wt({variant:t="bar",data:a,title:r,subtitle:l,xLabel:h,yLabel:n,width:s,height:i=260,fullWidth:x=!1,containerPadding:c=0,wrapperPadding:f=0,colors:b,showValues:m=!1,showGrid:p=!0,legend:L="bottom",centerLabel:v,showDots:A=!0,smooth:y=!1,yTicks:$=5,noWrap:S=!0,style:C}){var rt;const d=ut(),F=nt(()=>bt(d),[d]),u=b??Ct(d),e=Mt(a),g=nt(()=>x?$t(d,{containerPadding:c,wrapperPadding:f}):s??jt.default,[x,s,d,c,f]),M=t==="pie"||t==="donut",j=M?P.pieLeft:P.axisLeft,z=P.right,T=P.top,k=M?P.pieBottom:P.axisBottom,w=j,_=T,R=g-j-z,O=i-T-k,q=e.flatMap(V=>V.data.map(ft=>ft.value)),J=Math.min(...q,0),Q=Math.max(...q,1),N=J>=0?0:J,U=Q+(Q-N)*.08,ht=St(N,U,$),dt=((rt=e[0])==null?void 0:rt.data.map(V=>V.label))??[],D={svgW:g,svgH:i,chartX:w,chartY:_,chartW:R,chartH:O,yMin:N,yMax:U,yTicks:ht,xLabels:dt};let B=null;switch(t){case"bar":B=Wt(e,D,u,p,m,d);break;case"horizontal-bar":B=At(e,D,u,m,d);break;case"line":B=at(e,D,u,p,m,A,y,!1,d);break;case"area":B=at(e,D,u,p,m,A,y,!0,d);break;case"pie":B=ct(e,D,u,void 0,!1,d);break;case"donut":B=ct(e,D,u,v,!0,d);break}const tt=L!=="none"&&!M,ot=[F.container];C&&ot.push(C);const et=o.jsxs(G,{style:ot,children:[r&&o.jsx(W,{style:F.title,children:r}),l&&o.jsx(W,{style:F.subtitle,children:l}),o.jsxs(G,{style:L==="right"?F.chartWithRightLegend:void 0,children:[o.jsxs(it,{width:g,height:i,children:[o.jsx(yt,{children:o.jsxs(gt,{id:"bgGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx(st,{offset:"0%",stopColor:d.colors.background,stopOpacity:0}),o.jsx(st,{offset:"100%",stopColor:d.colors.background,stopOpacity:0})]})}),B,!M&&h&&o.jsx(W,{x:w+R/2,y:i-2,fill:d.colors.mutedForeground,textAnchor:"middle",style:{fontSize:8},children:h}),!M&&n&&o.jsx(W,{x:2,y:10,fill:d.colors.mutedForeground,textAnchor:"start",style:{fontSize:8},children:n})]}),tt&&L==="right"&&lt({series:e,palette:u,styles:F,position:"right"})]}),tt&&L==="bottom"&&lt({series:e,palette:u,styles:F,position:"bottom"})]});return S?o.jsx(G,{wrap:!1,children:et}):et}export{wt as P};
